<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puppeteer Automation Control Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ Puppeteer Automation Control Panel</h1>
            <div class="status-bar">
                <span class="status-item">
                    <span class="status-label">Server:</span>
                    <span id="serverStatus" class="status-badge status-connected">Connected</span>
                </span>
                <span class="status-item">
                    <span class="status-label">WebSocket:</span>
                    <span id="wsStatus" class="status-badge status-disconnected">Disconnected</span>
                </span>
                <span class="status-item">
                    <span class="status-label">Automation:</span>
                    <span id="automationStatus" class="status-badge status-idle">Idle</span>
                </span>
            </div>
        </header>

        <!-- Login Form Section -->
        <div class="login-section">
            <div class="panel">
                <div class="panel-header">
                    <h2>üîê C·∫•u h√¨nh ƒëƒÉng nh·∫≠p</h2>
                </div>
                <form id="loginForm" class="login-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="url">üåê URL Website:</label>
                            <input type="url" id="url" name="url" value="https://v.hit.club/" required 
                                   placeholder="https://example.com">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="username">üë§ Username:</label>
                            <input type="text" id="username" name="username" required 
                                   value="hsgdfsdfjgs"
                                   placeholder="Nh·∫≠p username">
                        </div>
                        <div class="form-group">
                            <label for="password">üîë Password:</label>
                            <input type="password" id="password" name="password" required 
                                   value="1122334455"
                                   placeholder="Nh·∫≠p password">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="width: 100%;">
                            <label>üí∞ S·ªë ti·ªÅn c∆∞·ª£c theo t·ª´ng l·∫ßn (VND):</label>
                            <div class="bet-amounts-grid">
                                <div class="bet-amount-item">
                                    <label for="betAmount1">S·ªë ti·ªÅn BET l·∫ßn 1</label>
                                    <input type="number" id="betAmount1" name="betAmount1" value="1000" min="500" step="500" required>
                                </div>
                                <div class="bet-amount-item">
                                    <label for="betAmount2">S·ªë ti·ªÅn BET l·∫ßn 2</label>
                                    <input type="number" id="betAmount2" name="betAmount2" value="5000" min="500" step="500" required>
                                </div>
                                <div class="bet-amount-item">
                                    <label for="betAmount3">S·ªë ti·ªÅn BET l·∫ßn 3</label>
                                    <input type="number" id="betAmount3" name="betAmount3" value="10000" min="500" step="500" required>
                                </div>
                                <div class="bet-amount-item">
                                    <label for="betAmount4">S·ªë ti·ªÅn BET l·∫ßn 4</label>
                                    <input type="number" id="betAmount4" name="betAmount4" value="10000" min="500" step="500" required>
                                </div>
                                <div class="bet-amount-item">
                                    <label for="betAmount5">S·ªë ti·ªÅn BET l·∫ßn 5</label>
                                    <input type="number" id="betAmount5" name="betAmount5" value="10000" min="500" step="500" required>
                                </div>
                            </div>
                            <small style="color: var(--text-secondary); margin-top: 8px; display: block;">
                                üí° S·ªë ti·ªÅn ·ªü c√°c √¥ n√†y s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅn v√†o tr∆∞·ªõc khi tool ch·∫°y. <br>
                                Khi thua, h·ªá th·ªëng s·∫Ω tƒÉng l√™n m·ª©c ti·ªÅn c∆∞·ª£c ti·∫øp theo (l·∫ßn 1‚Üí2‚Üí3‚Üí4‚Üí5).
                            </small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group checkbox-group">
                            <label>
                                <input type="checkbox" id="joinGameXoc" name="joinGameXoc" checked>
                                <span>üéÆ T·ª± ƒë·ªông v√†o game sau khi login</span>
                            </label>
                        </div>
                        <div class="form-group checkbox-group">
                            <label>
                                <input type="checkbox" id="enableWebSocketHook" name="enableWebSocketHook" checked>
                                <span>üîå B·∫≠t WebSocket Hook</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group checkbox-group">
                            <label>
                                <input type="checkbox" id="showStatsOnScreen" name="showStatsOnScreen" checked>
                                <span>üìä Hi·ªÉn th·ªã th·ªëng k√™ tr√™n m√†n h√¨nh game</span>
                            </label>
                        </div>
                        <div class="form-group checkbox-group">
                            <label>
                                <input type="checkbox" id="headlessMode" name="headlessMode" checked>
                                <span>ÔøΩ Ch·∫°y ng·∫ßm (Headless Mode)</span>
                            </label>
                            <small style="color: var(--text-secondary); margin-top: 4px; display: block;">
                                üí° B·ªè tick ƒë·ªÉ xem tr√¨nh duy·ªát ho·∫°t ƒë·ªông
                            </small>
                        </div>
                    </div>

                    <!-- Proxy Settings (Collapsible) -->
                    <div class="form-section">
                        <button type="button" class="collapse-btn" onclick="toggleProxySection()">
                            <span id="proxyToggleIcon">‚ñ∂</span> C·∫•u h√¨nh Proxy (Optional)
                        </button>
                        <div id="proxySection" class="proxy-section" style="display: none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="proxyHost">üåç Proxy Host:</label>
                                    <input type="text" id="proxyHost" name="proxyHost" 
                                           value="103.14.225.33"
                                           placeholder="proxy.example.com">
                                </div>
                                <div class="form-group">
                                    <label for="proxyPort">üîå Proxy Port:</label>
                                    <input type="number" id="proxyPort" name="proxyPort" 
                                           value="43784"
                                           placeholder="8080">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="proxyUser">üë§ Proxy Username:</label>
                                    <input type="text" id="proxyUser" name="proxyUser" 
                                           value="proxyviet"
                                           placeholder="Proxy username (n·∫øu c√≥)">
                                </div>
                                <div class="form-group">
                                    <label for="proxyPass">üîë Proxy Password:</label>
                                    <input type="password" id="proxyPass" name="proxyPass" 
                                           value="lYdJ0j4L"
                                           placeholder="Proxy password (n·∫øu c√≥)">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="startBtn">
                            üöÄ B·∫Øt ƒë·∫ßu Automation
                        </button>
                        <button type="button" class="btn btn-secondary" id="stopBtn" disabled>
                            ‚èπÔ∏è D·ª´ng l·∫°i
                        </button>
                        <button type="reset" class="btn btn-warning">
                            üîÑ Reset Form
                        </button>
                    </div>

                    <div id="formMessage" class="form-message"></div>
                </form>
            </div>
        </div>

        <!-- Betting Statistics Panel -->
        <div class="betting-stats-section" id="bettingStatsSection" style="display: none;">
            <div class="panel">
                <div class="panel-header">
                    <h2>üìä Th·ªëng k√™ c∆∞·ª£c <span id="sessionIdDisplay" style="font-size: 0.8em; color: #666;"></span></h2>
                    <div>
                        <button class="btn btn-sm btn-success" id="resumeSessionBtn" onclick="resumeSession()" style="display: none;">
                            ‚ñ∂Ô∏è Ti·∫øp t·ª•c ƒë·∫∑t c∆∞·ª£c
                        </button>
                        <button class="btn btn-sm btn-warning" id="stopSessionBtn" onclick="stopSession()">
                            ‚è∏Ô∏è D·ª´ng ƒë·∫∑t c∆∞·ª£c
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="resetBettingStats()">üîÑ Reset</button>
                    </div>
                </div>
                <div class="betting-stats-content">
                    <div class="stats-grid">
                        <div class="stat-card stat-balance">
                            <div class="stat-label">üíµ S·ªë d∆∞ hi·ªán t·∫°i</div>
                            <div class="stat-value" id="currentBalance">0</div>
                        </div>
                        <div class="stat-card stat-bet">
                            <div class="stat-label">üí∞ Ti·ªÅn c∆∞·ª£c hi·ªán t·∫°i</div>
                            <div class="stat-value" id="currentBetDisplay">500</div>
                        </div>
                        <div class="stat-card stat-wins">
                            <div class="stat-label">‚úÖ S·ªë l·∫ßn th·∫Øng</div>
                            <div class="stat-value" id="winCount">0</div>
                        </div>
                        <div class="stat-card stat-losses">
                            <div class="stat-label">‚ùå S·ªë l·∫ßn thua</div>
                            <div class="stat-value" id="lossCount">0</div>
                        </div>
                        <div class="stat-card stat-profit">
                            <div class="stat-label">üìà L·ª£i nhu·∫≠n</div>
                            <div class="stat-value" id="totalProfit">0</div>
                        </div>
                        <div class="stat-card stat-total">
                            <div class="stat-label">üéØ T·ªïng c∆∞·ª£c</div>
                            <div class="stat-value" id="totalBets">0</div>
                        </div>
                        <div class="stat-card stat-winrate">
                            <div class="stat-label">üìä T·ª∑ l·ªá th·∫Øng</div>
                            <div class="stat-value" id="winRate">0%</div>
                        </div>
                        <div class="stat-card stat-highest">
                            <div class="stat-label">üîù C∆∞·ª£c cao nh·∫•t</div>
                            <div class="stat-value" id="highestBet">0</div>
                        </div>
                        <div class="stat-card stat-runtime">
                            <div class="stat-label">‚è±Ô∏è Th·ªùi gian ch·∫°y</div>
                            <div class="stat-value" id="runtime">00:00</div>
                        </div>
                    </div>
                    
                    <!-- Bank Status -->
                    <div class="bank-status">
                        <h3>üè¶ Tr·∫°ng th√°i Bank & Streak</h3>
                        <div class="bank-grid">
                            <div class="bank-item">
                                <span class="bank-label">B·ªô 2:</span>
                                <span class="bank-value" id="bankL2">0</span>
                            </div>
                            <div class="bank-item">
                                <span class="bank-label">B·ªô 3:</span>
                                <span class="bank-value" id="bankL3">0</span>
                            </div>
                            <div class="bank-item">
                                <span class="bank-label">B·ªô 4:</span>
                                <span class="bank-value" id="bankL4">0</span>
                            </div>
                            <div class="bank-item">
                                <span class="bank-label">B·ªô 5:</span>
                                <span class="bank-value" id="bankL5">0</span>
                            </div>
                            <div class="bank-item">
                                <span class="bank-label">B·ªô 6:</span>
                                <span class="bank-value" id="bankL6">0</span>
                            </div>
                            <div class="bank-item">
                                <span class="bank-label">Chu·ªói hi·ªán t·∫°i:</span>
                                <span class="bank-value" id="currentStreak">-</span>
                            </div>
                            <div class="bank-item">
                                <span class="bank-label">Tr·∫°ng th√°i:</span>
                                <span class="bank-value" id="bettingStatus">ƒêang ch·ªù</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Real-time Stats from Browser -->
                    <div class="realtime-stats">
                        <h3>‚ö° Th·ªëng k√™ th·ªùi gian th·ª±c</h3>
                        <div class="realtime-grid">
                            <div class="realtime-item">
                                <span class="realtime-label">L·∫ßn c∆∞·ª£c g·∫ßn nh·∫•t:</span>
                                <div class="realtime-value-group">
                                    <span class="realtime-value" id="lastBetAmount">-</span>
                                    <span class="realtime-subvalue" id="lastBetEid">-</span>
                                </div>
                            </div>
                            <div class="realtime-item">
                                <span class="realtime-label">L·∫ßn c∆∞·ª£c ti·∫øp theo:</span>
                                <div class="realtime-value-group">
                                    <span class="realtime-value" id="nextBetAmount">-</span>
                                    <span class="realtime-subvalue" id="betLevelInfo">-</span>
                                </div>
                            </div>
                            <div class="realtime-item">
                                <span class="realtime-label">K·∫øt qu·∫£ v·ª´a r·ªìi:</span>
                                <div class="realtime-value-group">
                                    <span class="result-badge" id="lastResult">-</span>
                                    <span class="outcome-badge" id="lastOutcome">-</span>
                                </div>
                            </div>
                            <div class="realtime-item">
                                <span class="realtime-label">V√≤ng c∆∞·ª£c:</span>
                                <span class="realtime-value" id="roundCounter">0/4</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Stats -->
                    <div class="advanced-stats">
                        <h3>üìà Th·ªëng k√™ n√¢ng cao</h3>
                        <div class="advanced-grid">
                            <div class="advanced-item">
                                <span class="advanced-label">T·ªïng ti·ªÅn th·∫Øng:</span>
                                <span class="advanced-value success" id="totalWinAmount">0</span>
                            </div>
                            <div class="advanced-item">
                                <span class="advanced-label">T·ªïng ti·ªÅn thua:</span>
                                <span class="advanced-value error" id="totalLossAmount">0</span>
                            </div>
                            <div class="advanced-item">
                                <span class="advanced-label">Th·∫Øng li√™n ti·∫øp (hi·ªán t·∫°i):</span>
                                <span class="advanced-value" id="currentWinStreak">0</span>
                            </div>
                            <div class="advanced-item">
                                <span class="advanced-label">Thua li√™n ti·∫øp (hi·ªán t·∫°i):</span>
                                <span class="advanced-value" id="currentLossStreak">0</span>
                            </div>
                            <div class="advanced-item">
                                <span class="advanced-label">Th·∫Øng li√™n ti·∫øp (t·ªëi ƒëa):</span>
                                <span class="advanced-value success" id="maxWinStreak">0</span>
                            </div>
                            <div class="advanced-item">
                                <span class="advanced-label">Thua li√™n ti·∫øp (t·ªëi ƒëa):</span>
                                <span class="advanced-value error" id="maxLossStreak">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bet History Section -->
            <div class="panel">
                <div class="panel-header">
                    <h2>üìú L·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c g·∫ßn ƒë√¢y</h2>
                    <div class="history-controls">
                        <button id="clearHistoryBtn" class="btn-small btn-warning">üóëÔ∏è X√≥a l·ªãch s·ª≠</button>
                        <span class="history-count">Hi·ªÉn th·ªã: <span id="historyCount">0</span>/20 g·∫ßn nh·∫•t</span>
                    </div>
                </div>
                <div class="bet-history-container" id="betHistoryContainer">
                    <div class="bet-history-empty" id="betHistoryEmpty">
                        <span>üì≠ Ch∆∞a c√≥ l·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c</span>
                    </div>
                    <div class="bet-history-list" id="betHistoryList">
                        <!-- Bet history items will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button id="clearLogsBtn" class="btn btn-danger">üóëÔ∏è Clear Logs</button>
            <button id="pauseLogsBtn" class="btn btn-warning">‚è∏Ô∏è Pause</button>
            <button id="exportLogsBtn" class="btn btn-info">üíæ Export</button>
            <label class="checkbox-label">
                <input type="checkbox" id="autoScrollCheckbox" checked>
                Auto-scroll
            </label>
            <label class="checkbox-label">
                <input type="checkbox" id="showTimestampCheckbox" checked>
                Show Timestamp
            </label>
        </div>

        <!-- Bottom Panel: System Logs -->
        <div class="panel full-width">
            <div class="panel-header">
                <h2>üñ•Ô∏è System Logs</h2>
                <span id="systemLogCount" class="badge">0 logs</span>
            </div>
            <div id="systemLogs" class="log-container"></div>
        </div>

        <!-- Statistics Panel -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-label">Total Messages</div>
                <div class="stat-value" id="totalMessages">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">WebSocket Sent</div>
                <div class="stat-value" id="wsSent">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">WebSocket Received</div>
                <div class="stat-value" id="wsReceived">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Steps Completed</div>
                <div class="stat-value" id="stepsCompleted">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Errors</div>
                <div class="stat-value error" id="errorCount">0</div>
            </div>
        </div>
    </div>

    <script src="client.js"></script>
</body>
</html>
